<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <!-- CSS para la página del perfil-->
  <link rel="stylesheet" href="/css/perfil.css" />
  <!-- Fuente -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" />
</head>

<script>
	function previewFile() {
	  var preview = document.querySelector('img');
	  var file    = document.querySelector('input[type=file]').files[0];
	  var reader  = new FileReader();

	  reader.onloadend = function () {
		preview.src = reader.result;
		document.getElementById("imgString").value = reader.result;
		console.log(document.getElementById("imgString").value);
	  }

	  if (file) {
		reader.readAsDataURL(file);
	  } else {
		preview.src = "";
	  }
	}
</script>

<body>
  <div class="card-body">
    <div class="row">

      <div class="col-md-3">
        <div class="text-center">
          <!--<img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="rounded-circle" alt="avatar" /> -->
          <!-- <input type="file" class="form-control" /> -->
		  <img th:if="${session.userData.foto}" th:src="${session.userData.foto}" height="166" alt="Image preview..." />
		  <img th:unless="${session.userData.foto}" src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" height="166" alt="Image preview..." /><br/>
		  <input type="file" style="width: 175px;" onchange="previewFile()"></input>
        </div>
      </div>

      <div class="col-md-9 personal-info">
        <h3>Datos de usuario</h3>

        <form action="/perfil" method="POST" name="perfil" id="perfil" class="form-horizontal">
          <div class="form-group">
            <label class="col-lg-3 control-label"><strong>Alias:</strong></label>
            <div class="col-lg-8">
              <td th:text="${session.userData.alias}"></td>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label"><strong>Nombre:</strong></label>
            <div class="col-lg-8">
              <input class="form-control" id="nombre" name="nombre" type="text" th:value="${session.userData.nombre}" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label"><strong>Primer apellido:</strong></label>
            <div class="col-lg-8">
              <input class="form-control" id="primerApellido" name="primerApellido" type="text" th:value="${session.userData.primerApellido}" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label"><strong>Segundo Apellido:</strong></label>
            <div class="col-lg-8">
              <input class="form-control" id="segundoApellido" name="segundoApellido" type="text" th:value="${session.userData.segundoApellido}" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label"><strong>Email:</strong></label>
            <div class="col-lg-8">
              <input class="form-control" id="email" name="email" type="text" th:value="${session.userData.email}" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label"><strong>Telefono:</strong></label>
            <div class="col-md-8">
              <input class="form-control" id="telefono" name="telefono" type="text" th:value="${session.userData.telefono}" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label"><strong>Sexo:</strong></label>
            <div class="col-md-8">
              <td th:text="${session.userData.sexo}"></td>
            </div>
          </div>
		  <input type="hidden" id="imgString" name="imgString" value="" />

          <div class="form-group">
            <label class="col-md-3 control-label"></label>
            <div class="col-md-8">
              <input type="submit" class="btn btn-info" id="guardarCambios" value="Guardar cambios" />
              <input type="reset" class="btn btn-default" value="Cancelar" />
            </div>
          </div>
        </form>

      </div>
    </div>
  </div>
  <hr>
  </hr>
  <div class="card-body">
    <h3 class="text-center">Estadísticas</h3>
    <div class="row">
      <div class="col-md-6 form-group text-center">
        <label><strong>Número de post</strong></label>
        <div>
          <td>63</td>
        </div>
      </div>
      <div class="col-md-6 form-group text-center">
        <label><strong>Puntos</strong></label>
        <div>
          <td>3432432</td>
        </div>
      </div>
    </div>
  </div>
</body>

</html>